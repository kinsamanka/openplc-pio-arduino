[platformio]
core_dir = .core_dir

[env]
extra_scripts =
    pre:bin/script.py
build_flags =
    -I lib/matiec/lib/C
    -I src
    -I src/generated
framework = arduino
platform_packages = 
    tool-matiec@https://github.com/kinsamanka/matiec#dist
lib_archive = no

[env:uno]
platform = atmelavr
board = uno
build_flags =
    ${env.build_flags}
    -D BOARD_UNO
    -D MODBUS_SLAVE

[env:micro]
extends = env:uno
board = sparkfun_promicro16
build_flags =
    ${env.build_flags}
    -D BOARD_UNO
    -D MODBUS_MASTER
    -D MODBUS_SLAVE
    -D RS485_MASTER_EN

[env:mega]
platform = atmelavr
board = megaatmega2560
build_flags =
    ${env.build_flags}
    -D BOARD_MEGA_DUE
    -D MODBUS_SLAVE

[env:dueUSB]
extends = env:mega
platform = atmelsam
board = dueUSB

[env:due]
extends = env:mega
platform = atmelsam
board = due

[env:nano_every]
platform = atmelmegaavr
board = nano_every
build_flags =
    ${env.build_flags}
    -D BOARD_NANO_EVERY
    -D MODBUS_SLAVE

[env:nano_33_iot]
platform = atmelsam
board = nano_33_iot
build_flags =
    ${env.build_flags}
    -D BOARD_WIFININA
    -D MODBUS_SLAVE

;[env:nano33ble]
;extends = env:nano_every
;platform = nordicnrf52
;board = nano33ble


